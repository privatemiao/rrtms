<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
		<meta name="HandheldFriendly" content="true"/>
		<meta name="MobileOptimized" content="320"/>
		<title>Hello H5+</title>
		<script type="text/javascript" src="../js/mui.js" ></script>
		<script type="text/javascript" src="../js/commonx.js"></script>
		<link rel="stylesheet" href="../css/mui.min.css" />
		<script type="text/javascript">
var ws=null,wo=null;
var em=null,map=null;
// H5 plus事件处理
function plusReadyv(){
	//if(!em||ws){return};
	// 获取窗口对象
	ws=plus.webview.currentWebview();
	wo=ws.opener();
	setTimeout(function(){
		map=new plus.maps.Map("map");
		if(map)
		{
		map.centerAndZoom(new plus.maps.Point(120.613028,31.261391),10);
		createMarker();
		}
	},300);
	// 显示页面并关闭等待框
	if (ws){
		ws.show("slide-in-right",300);	
	}
    if (wo){
    	wo.evalJS("closeWaiting()");	
    }
    
}
if(window.plus){
	plusReadyv();
}else{
	document.addEventListener("plusready",plusReadyv,false);
}
// DOMContentloaded事件处理
document.addEventListener("DOMContentLoaded",function(){
	em=document.getElementById("map");
	window.plus&&plusReadyv();
},false);
function userLocation(){
	if(map)
	{
	map.showUserLocation( true );
	map.getUserLocation(function(state,pos){
		if(0==state){
			map.setCenter(pos);
		}
	});
	}
}
function createMarker(){
	var marker=new plus.maps.Marker(new plus.maps.Point(120.613028,31.261391));
	//marker.setIcon("../logo.png");
	marker.setLabel("苏州普瑞-吴中总部");
	var bubble = new plus.maps.Bubble("国内领先的电能服务商4008865001");
	marker.setBubble(bubble);
	
	var marker1=new plus.maps.Marker(new plus.maps.Point(120.782548,31.312988));
	//marker1.setIcon("../logo.png");
	marker1.setLabel("苏州普瑞-2.5产业园");
	var bubble1 = new plus.maps.Bubble("国内领先的电能服务商");
	marker1.setBubble(bubble1);
	
	
	var marker2=new plus.maps.Marker(new plus.maps.Point(120.913778,31.434786));
	//marker2.setIcon("../logo.png");
	marker2.setLabel("苏州普瑞-昆山分公司");
	var bubble2 = new plus.maps.Bubble("国内领先的电能服务商");
	marker2.setBubble(bubble2);
	
	map.addOverlay(marker);
	map.addOverlay(marker1);
	map.addOverlay(marker2);
}
		</script>
		<link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8"/>
		<style type="text/css">
#map {
	width: 100%;
	position: fixed;
	top: 44px;
	bottom: 0px;
	line-height: 200px;
	text-align: center;
	background: #FFFFFF;
}
.ipos {
	background: no-repeat center center url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAsCAYAAAAn4+taAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAwNC8wMS8xNExYUU4AAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzbovLKMAAACTklEQVRoge2YO2gUURSGv7PjEkULO4UoFooIFgtzprAPWMiWKewSTadgYWEhBjHCloGUQtYHaGEjGAQtUmgnZO9YpsqC2NgYIwjRInMscoPrYkzhGTIs8zdnzoP578ewM/eumBmjoMZ+L8BLNUjVVINUTTVI1VSDVE0jA3KgjJuGEE6LyI2iKC6JyBkzWxORF8ADVV0rw1O891ohhCngPnDyL+1PZjabZdkTV1OcQUIIV4CHMf0JvAK+A0eANjAWe1dV9ZGbMY6/kTzPzwHzMV0VkZaqTgLTqjopIi1gNfbnQwhnvbzBEcTMbgFHgXURaRdFsRFCWAa+hhCWi6LYEJE2sB7nbnp5g+9b62KMIU3Tvoh0gQm2Fz0hIt00TftAADCztqO3K8h4jJsAZnZ+sDmQ/wAQkXEc5QnyJcZjACLybLApIk/j5YmheRd5gryLMev1elOqesfMrpvZczO7pqqzvV5vGmgNzbvIDUREXsbLRES6IYTbzWZzMcuyy0mSPA4h3BWRxR3PgXkff6/vSJ7nx83sPXBqoLwJFEACHByofxSRC2mafnYxx/GJxEW9GSofAg7zJwTAa08I8N80doG9HrHx++vvJlcQVV0xs6V/zZjZkqquePpCOdv4OWBrl96WiNwrwdMfJMuyHFjYpb2gqh+8PaG8g9Uc0B+q9WO9FJUCoqrfgBm2X73EOBPrpai0o66qvgU6Me3EvDSVctTdUZIknaIoxhqNRmfv6f+T+1F3vzQy/6LUIFVTDVI11SBVUw1SNdUgVdPIgPwCtt+2JPQRVicAAAAASUVORK5CYII=);
	background-size: 50px 44px;
}		</style>
	</head>
	<body>
		
		<header class="mui-bar mui-bar-nav">
			<a id="bck" class="mui-icon mui-icon-left-nav mui-pull-left"></a>
			<a id="dingwei" class="mui-icon mui-icon-map mui-pull-right"></a>
			<h1 class="mui-title">普瑞服务分布</h1>
		</header>
		<div id="map">地图加载中...</div>
		<script>
			window.onload =function(){
				document.getElementById('dingwei').addEventListener('click', function() {
		   
				                userLocation();
			      });
			      
			      document.getElementById('bck').addEventListener('click', function() {
		                        
				               back();
			      });
			};
		</script>
	</body>
</html>